(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(1),s=a.n(n),r=a(20),o=a.n(r),i=(a(107),a(29)),l=a(30),d=a(34),u=a(33),j=(a(108),a(12)),p=a(18),b=a(9),h=a.n(b),m=a(14),O=a(13),x=a(11),f=a.n(x),g="GET_ERRORS",v="CLEAR_ERRORS",y="SIGNUP_SUCCESS",w="LOGOUT",N="LOGIN_SUCCESS",_="USER_LOADED_SUCCESS",S="USER_LOADED_FAIL",C="AUTHENTICATED_SUCCESS",k="AUTHENTICATED_FAIL",A="START_CART",E="CART_SUCCESS",T="CART_FAIL",I="DELETE_SUCCESS",P="DELETE_USER_SUCCESS",D="UPDATE_USER_SUCCESS",R="UPDATE_USER_FAIL",U="UPDATE_USER",L="SET_PASSWORD_SUCCESS",z="GET_PAYMENT_SUCCESS",M=function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:g,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,f.a.get("http://127.0.0.1:8000/auth/users/me/",a);case 5:c=e.sent,t({type:_,payload:c.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:S});case 12:e.next=15;break;case 14:t({type:S});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var c,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:A}),!localStorage.getItem("access")){t.next=15;break}return c={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},t.prev=3,t.next=6,f.a.get("http://127.0.0.1:8000/products/OrderSummary/".concat(e),c);case 6:n=t.sent,a({type:E,payload:n.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a({type:T});case 13:t.next=16;break;case 15:a({type:T});case 16:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).componentDidMount=function(){(function(){var t=Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.checkAuthenticated();case 3:return t.next=5,e.props.load_user();case 5:return t.next=7,e.props.fetchCart(e.props.account.user.id);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}})()()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.account,t=e.access,a=e.user,n=this.props.cart,s=Object(c.jsxs)("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(c.jsxs)("li",{className:"nav-item item-cart",children:[Object(c.jsx)("a",{className:"nav-link waves-effect item-cart",children:n?0!==n.order_items.length&&Object(c.jsx)("span",{className:"badge",children:n.order_items.length}):null}),Object(c.jsxs)("div",{className:"dropdown ",children:[Object(c.jsxs)("button",{className:"btn btn-secondary dropdown-toggle bg-transparent border-0 btn_cart mr-2",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[Object(c.jsx)("i",{className:"fa fa-shopping-cart mr-1","aria-hidden":"true"})," ","Cart"]}),Object(c.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[n?0!==n.order_items.length&&n.order_items.map((function(e){return Object(c.jsxs)("a",{className:"dropdown-item",children:[e.quantity," x ",e.item.title]},e.id)})):null,n?0==n.order_items.length&&Object(c.jsx)("a",{className:"dropdown-item",children:"No item in your cart"}):null,Object(c.jsx)("div",{className:"dropdown-divider"}),Object(c.jsxs)("a",{className:"dropdown-item",href:"/order_summary",children:[Object(c.jsx)("i",{className:"fa fa-arrow-right mr-1","aria-hidden":"true"}),"Checkout"]})]})]})]}),Object(c.jsxs)("span",{className:"navbar-text mr-3",children:[Object(c.jsx)(j.b,{to:"/profile",className:"nav-link-to mr-3 ml-2",children:"Profile"}),Object(c.jsx)("strong",{children:a?"Welcome ".concat(a.name):""})]}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("button",{onClick:this.props.logout,className:"nav-link btn btn-info btn-sm text-light",children:"Logout"})})]}),r=Object(c.jsxs)("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/register",className:"nav-link",children:"Register"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/login",className:"nav-link",children:"Login"})})]});return Object(c.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01",children:[Object(c.jsx)("a",{className:"navbar-brand",href:"#",children:"Store App"}),Object(c.jsx)(j.b,{className:"nav-link-to",to:"/",children:"Home"})]}),t?s:r]})})}}]),a}(n.Component),B=Object(O.b)((function(e){return{account:e.account,cart:e.product.cart}}),{logout:function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:w});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},checkAuthenticated:function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof window&&t({type:k}),!localStorage.getItem("access")){e.next=16;break}return a={headers:{Accept:"application/json","Content-Type":"application/json"}},c=JSON.stringify({token:localStorage.getItem("access")}),e.prev=4,e.next=7,f.a.post("http://127.0.0.1:8000/auth/jwt/verify/",c,a);case 7:"token_not_valid"!==e.sent.data.code?t({type:C}):t({type:k}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t({type:k});case 14:e.next=17;break;case 16:t({type:k});case 17:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},load_user:F,fetchCart:J})(W),H=a(10),G=a(90),Y=(a(61),a(176));var q=function(e){return Object(c.jsx)("div",{className:"card_product_list",children:Object(c.jsxs)("div",{className:"card_product mt-5 mb-3 ml-2 mr-2",children:[Object(c.jsxs)("div",{className:"view view-cascade overlay",children:[Object(c.jsx)("img",{className:"card-img-top",src:e.photo_main,alt:""}),Object(c.jsx)("a",{children:Object(c.jsx)("div",{className:"mask rgba-white-slight"})})]}),Object(c.jsxs)("div",{className:"card-body card-body-cascade text-center",children:[Object(c.jsx)("h5",{children:e.category}),Object(c.jsx)("h4",{className:"card-title",children:Object(c.jsx)("strong",{children:Object(c.jsx)("a",{href:"",children:e.title})})}),Object(c.jsx)("p",{className:"card-text",children:e.description}),Object(c.jsxs)("div",{className:"card-footer",children:[e.discount_price?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("span",{className:"mr-2",children:["Price :",e.discount_price," $"]})," ",Object(c.jsxs)("span",{className:"solde-price",children:["$",e.price]})]}):Object(c.jsxs)("span",{className:"mr-2",children:["Price : $",e.price]}),Object(c.jsx)(j.b,{to:"/products/".concat(e.id),children:Object(c.jsx)(Y.a,{children:"View description"})})]})]})]})})},V=(a(80),function(e){return Object(c.jsxs)("div",{className:"pagination",children:[Object(c.jsx)("div",{onClick:function(){return e.previous()},className:"pagination__number",children:"Previous"}),function(){for(var t=[],a=e.itemsPerPage,n=1,s=function(a){var s=n,r="pagination__number",o=null;e.active===s?(r="pagination__number pagination__number--active",o=Object(c.jsx)("div",{className:r,children:n},a)):o=Object(c.jsx)("div",{onClick:function(){return e.visitPage(s)},className:r,children:n},a),t.push(o),n++},r=0;r<e.count;r+=a)s(r);return t}(),Object(c.jsx)("div",{onClick:function(){return e.next()},className:"pagination__number",children:"Next"})]})});var Q=function(){return Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{margin:"auto",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(c.jsx)("circle",{cx:"50",cy:"23",r:"13",fill:"#0055a5",children:Object(c.jsx)("animate",{attributeName:"cy",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keySplines:"0.45 0 0.9 0.55;0 0.45 0.55 0.9",keyTimes:"0;0.5;1",values:"23;77;23"})})," "]})},$=Object(O.b)((function(e){return{user:e.account.user}}),{fetchCart:J})((function(e){var t=e.fetchCart,a=e.user,s=Object(n.useState)([]),r=Object(H.a)(s,2),o=r[0],i=r[1],l=Object(n.useState)(0),d=Object(H.a)(l,2),u=d[0],j=d[1],p=Object(n.useState)(""),b=Object(H.a)(p,2),O=b[0],x=b[1],g=Object(n.useState)(""),v=Object(H.a)(g,2),y=v[0],w=v[1],N=Object(n.useState)(1),_=Object(H.a)(N,2),S=_[0],C=_[1],k=Object(n.useState)(!1),A=Object(H.a)(k,2),E=A[0],T=A[1];Object(n.useEffect)((function(){window.scrollTo(0,0),T(!0),a&&t(a.id),function(){var e=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("http://127.0.0.1:8000/products/?page=1");case 3:t=e.sent,i(t.data.results),j(t.data.count),x(t.data.previous),w(t.data.next),T(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),T(!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[a]);return Object(c.jsx)("div",{className:"container",children:E?Object(c.jsx)(Q,{}):Object(c.jsxs)("main",{className:"listings",children:[Object(c.jsxs)(G.a,{children:[Object(c.jsx)("title",{children:"Products Lists - Listings"}),Object(c.jsx)("meta",{name:"description",content:"Listings page"})]}),Object(c.jsx)("div",{className:"listings__listings",children:o.map((function(e){return Object(c.jsx)(q,{title:e.title,category:e.category,price:e.price,discount_price:e.discount_price,description:e.description,photo_main:e.photo_main,id:e.id},e.id)}))}),Object(c.jsx)("section",{className:"listings__pagination",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)(V,{itemsPerPage:3,count:u,visitPage:function(e){f.a.get("http://127.0.0.1:8000/products/?page=".concat(e)).then((function(t){i(t.data.results),x(t.data.previous),w(t.data.next),C(e)})).catch((function(e){}))},previous:function(){f.a.get(O).then((function(e){i(e.data.results),x(e.data.previous),w(e.data.next),O&&C(S-1)})).catch((function(e){}))},next:function(){f.a.get(y).then((function(e){i(e.data.results),x(e.data.previous),w(e.data.next),y&&C(S+1)})).catch((function(e){}))},active:S,setActive:C})})})]})})})),K=a(177);var X=Object(O.b)((function(e){return{account:e.account}}),{load_user:F,fetchCart:J})((function(e){var t=Object(n.useState)({}),a=Object(H.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(0),i=Object(H.a)(o,2),l=i[0],d=i[1],u=Object(n.useState)(!1),j=Object(H.a)(u,2),b=j[0],h=j[1];return Object(n.useEffect)((function(){e.load_user();var t=e.match.params.id;f.a.get("http://127.0.0.1:8000/products/".concat(t)).then((function(e){r(e.data),d(e.data.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))})).catch((function(e){}))}),[e.match.params.id]),Object(c.jsxs)("div",{children:[b?Object(c.jsx)(p.a,{to:"/login"}):null,Object(c.jsx)("div",{className:"container mt-4",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(K.a,{className:"img-main",src:s.photo_main})}),s.photo_1?Object(c.jsxs)("div",{className:"col",children:[s.photo_1?Object(c.jsx)(K.a,{className:"img-detail",src:s.photo_1,alt:""}):null,s.photo_2?Object(c.jsx)(K.a,{className:"img-detail",src:s.photo_2,alt:""}):null,s.photo_3?Object(c.jsx)(K.a,{className:"img-detail",src:s.photo_3,alt:""}):null,s.photo_4?Object(c.jsx)(K.a,{className:"img-detail",src:s.photo_4,alt:""}):null]}):null,Object(c.jsxs)("div",{className:"col",children:[s.discount_price?Object(c.jsxs)("li",{className:"listingdetail__list__item",children:[" Price :",Object(c.jsxs)("span",{className:" solde-price",children:["$",l]})," $ ",s.discount_price," "]}):Object(c.jsxs)("li",{className:"listingdetail__list__item",children:["Price: $",l]}),Object(c.jsxs)("li",{className:"listingdetail__list__item",children:["Description: ",s.description]}),Object(c.jsxs)(Y.a,{className:"mt-5",onClick:function(){if(e.account.user&&e.account.access){var t=e.account.user.id,a=s.slug;console.log(t);var c={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}};f.a.post("http://127.0.0.1:8000/products/add-to-cart/",{slug:a,user_id:t},c).then((function(t){e.fetchCart(e.account.user.id),console.log("done",t.data)})).catch((function(e){}))}else h(!0)},children:["Add To Cart ",Object(c.jsx)("i",{className:"fa fa-cart-plus","aria-hidden":"true"})]})]})]})})]})})),Z=a(21),ee=a(7),te=a(178),ae=Object(O.b)((function(e){return{isAuthenticated:e.account.isAuthenticated,error:e.errors}}),{login:function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(c){var n,s,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={headers:{"Content-Type":"application/json"}},s=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,f.a.post("http://127.0.0.1:8000/auth/jwt/create/",s,n);case 5:r=a.sent,c({type:N,payload:r.data}),c(F()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),c(M({msg:a.t0.response.data,status:a.t0.response.status,id:"LOGIN_FAIL"}));case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,s=e.error,r=Object(n.useState)({email:"",password:""}),o=Object(H.a)(r,2),i=o[0],l=o[1],d=i.email,u=i.password,b=function(e){return l(Object(ee.a)(Object(ee.a)({},i),{},Object(Z.a)({},e.target.name,e.target.value)))};return a?Object(c.jsx)(p.a,{to:"/"}):Object(c.jsx)("div",{className:"container col-md-6 m-auto",children:Object(c.jsxs)("div",{className:"card card-body mt-5",children:[Object(c.jsx)("h2",{className:"text-center",children:"Login"}),"LOGIN_FAIL"===s.id?Object(c.jsx)(te.a,{variant:"danger",children:"Please verify your email and password"}):null,Object(c.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(d,u)}(e)},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"email",onChange:function(e){return b(e)},value:d})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:function(e){return b(e)},value:u})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Login"})}),Object(c.jsxs)("p",{children:["Don't have an account? ",Object(c.jsx)(j.b,{to:"/register",children:"Sign up"})]}),Object(c.jsxs)("p",{children:["Forget your Password?"," ",Object(c.jsx)(j.b,{to:"/reset_password",children:"Reset password"})]})]})]})})})),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={name:"",email:"",password:"",re_password:"",accountCreated:!1},e.onSubmit=function(t){t.preventDefault();var a=e.state,c=a.name,n=a.email,s=a.password,r=a.re_password;s===r&&(e.props.sign_up({name:c,email:n,password:s,re_password:r}),e.setState({accountCreated:!0}))},e.onChange=function(t){return e.setState(Object(Z.a)({},t.target.name,t.target.value))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.accountCreated;if(this.props.isAuthenticated)return Object(c.jsx)(p.a,{to:"/"});if(e)return Object(c.jsx)(p.a,{to:"/login"});var t=this.state,a=t.name,n=t.email,s=t.password,r=t.re_password;return Object(c.jsx)("div",{className:"col-md-6 m-auto",children:Object(c.jsxs)("div",{className:"card card-body mt-5",children:[Object(c.jsx)("h2",{className:"text-center",children:"Register"}),Object(c.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Username"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",onChange:this.onChange,value:a})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Email"}),Object(c.jsx)("input",{type:"email",className:"form-control",name:"email",onChange:this.onChange,value:n})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:s})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Confirm Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",name:"re_password",onChange:this.onChange,value:r})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Register"})}),Object(c.jsxs)("p",{children:["Already have an account? ",Object(c.jsx)(j.b,{to:"/login",children:"Login"})]})]})]})})}}]),a}(n.Component),ne=Object(O.b)((function(e){return{isAuthenticated:e.account.isAuthenticated}}),{sign_up:function(e){var t=e.name,a=e.email,c=e.password,n=e.re_password;return function(){var e=Object(m.a)(h.a.mark((function e(s){var r,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},o=JSON.stringify({name:t,email:a,password:c,re_password:n}),e.prev=2,e.next=5,f.a.post("http://127.0.0.1:8000/auth/users/",o,r);case 5:i=e.sent,s({type:y,payload:i.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(M({msg:e.t0.response.data,status:e.t0.response.status,id:"SIGNUP_FAIL"}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})(ce),se=Object(O.b)(null,{verify:function(e,t){return function(){var a=Object(m.a)(h.a.mark((function a(c){var n,s,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={headers:{"Content-Type":"application/json"}},s=JSON.stringify({uid:e,token:t}),a.prev=2,a.next=5,f.a.post("http://127.0.0.1:8000/auth/users/activation/",s,n);case 5:r=a.sent,c({type:"ACTIVATION_SUCCESS",payload:r.data}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),c({type:"ACTIVATION_FAIL"});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(H.a)(t,2),s=a[0],r=a[1];return s?Object(c.jsx)(p.a,{to:"/login"}):Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",marginTop:"200px"},children:[Object(c.jsx)("h1",{children:"Verify your Account:"}),Object(c.jsx)("button",{onClick:function(t){var a=e.match.params.uid,c=e.match.params.token;e.verify(a,c),r(!0)},style:{marginTop:"50px"},type:"button",className:"btn btn-primary",children:"Verify"})]})})})),re=Object(O.b)(null,{reset_password:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var c,n,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={headers:{"Content-Type":"application/json"}},n=JSON.stringify({email:e}),t.prev=2,t.next=5,f.a.post("http://127.0.0.1:8000/auth/users/reset_password/",n,c);case 5:s=t.sent,a({type:"RESET_PASSWORD_SUCCESS",payload:s.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a(M({msg:t.t0.response.data,status:t.t0.response.status,id:"RESET_PASSWORD_FAIL"}));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(H.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)({email:""}),i=Object(H.a)(o,2),l=i[0],d=i[1],u=l.email;return s?Object(c.jsx)(p.a,{to:"/"}):Object(c.jsxs)("div",{className:"container mt-5",children:[Object(c.jsx)("h1",{children:"Request Password Reset:"}),Object(c.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.reset_password(u),r(!0)}(t)},children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{className:"form-control",type:"email",placeholder:"Your Email",name:"email",value:u,onChange:function(e){return function(e){return d(Object(ee.a)(Object(ee.a)({},l),{},Object(Z.a)({},e.target.name,e.target.value)))}(e)},required:!0})}),Object(c.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Reset Password"})]})]})})),oe=Object(O.b)(null,{reset_password_confirm:function(e,t,a,c){return function(){var n=Object(m.a)(h.a.mark((function n(s){var r,o,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},o=JSON.stringify({uid:e,token:t,new_password:a,re_new_password:c}),n.prev=2,n.next=5,f.a.post("http://127.0.0.1:8000/auth/users/reset_password_confirm/",o,r);case 5:i=n.sent,s({type:"RESET_PASSWORD_CONFIRM_SUCCESS",payload:i.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),s({type:"RESET_PASSWORD_CONFIRM_FAIL"});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(H.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)({new_password:"",re_new_password:""}),i=Object(H.a)(o,2),l=i[0],d=i[1],u=l.new_password,j=l.re_new_password,b=function(e){return d(Object(ee.a)(Object(ee.a)({},l),{},Object(Z.a)({},e.target.name,e.target.value)))};return s?Object(c.jsx)(p.a,{to:"/"}):Object(c.jsx)("div",{className:"container mt-5",children:Object(c.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var a=e.match.params.uid,c=e.match.params.token;e.reset_password_confirm(a,c,u,j),r(!0)}(t)},children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{className:"form-control",type:"password",placeholder:"New Password",name:"new_password",value:u,onChange:function(e){return b(e)},minLength:"6",required:!0})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{className:"form-control",type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:j,onChange:function(e){return b(e)},minLength:"6",required:!0})}),Object(c.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Reset Password"})]})})}));var ie=function(){return Object(c.jsxs)("footer",{className:" footer dark pt-4 mt-5",children:[Object(c.jsxs)("ul",{className:"footer__social",children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"button--svg",href:"https://www.facebook.com/",children:Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",viewBox:"0 0 46 46",role:"img","aria-labelledby":"facebook-icon",children:[Object(c.jsx)("title",{id:"facebook-icon",children:"Facebook"}),Object(c.jsx)("path",{fill:"#3C599A",d:"M18.896 20.12h1.758v-1.708c0-.753.02-1.915.566-2.635.576-.762 1.368-1.28 2.73-1.28 2.218 0 3.15.316 3.15.316l-.438 2.605s-.73-.212-1.417-.212c-.684 0-1.296.245-1.296.93v1.985h2.803l-.194 2.547h-2.61v8.84h-3.297v-8.84h-1.758V20.12z"}),Object(c.jsx)("path",{className:"button--svg__border",fill:"#E5E5E5",d:"M23 3c11.027 0 20 8.972 20 20 0 11.027-8.973 20-20 20-11.028 0-20-8.973-20-20C3 11.972 11.972 3 23 3m0-2C10.85 1 1 10.85 1 23s9.85 22 22 22 22-9.85 22-22S35.15 1 23 1z"})]})})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"button--svg",href:"https://twitter.com/",children:Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",viewBox:"0 0 46 46",role:"img","aria-labelledby":"twitter-icon",children:[Object(c.jsx)("title",{id:"twitter-icon",children:"Twitter"}),Object(c.jsx)("path",{className:"button--svg__border",fill:"#E5E5E5",d:"M23 3c11.028 0 20 8.972 20 20s-8.972 20-20 20S3 34.028 3 23 11.972 3 23 3m0-2C10.85 1 1 10.85 1 23s9.85 22 22 22 22-9.85 22-22S35.15 1 23 1z"}),Object(c.jsx)("path",{fill:"#5EA9DE",d:"M31.52 17.716c-.627.278-1.302.466-2.008.55.722-.432 1.275-1.116 1.536-1.933-.676.4-1.422.69-2.22.847-.637-.68-1.546-1.103-2.552-1.103-1.93 0-3.494 1.565-3.494 3.495 0 .273.03.54.09.796-2.904-.146-5.48-1.536-7.205-3.653-.3.52-.473 1.12-.473 1.76 0 1.212.617 2.28 1.555 2.908-.576-.017-1.115-.176-1.587-.436v.043c0 1.694 1.205 3.107 2.805 3.427-.295.082-.603.123-.923.123-.225 0-.444-.02-.657-.062.445 1.388 1.736 2.4 3.266 2.425-1.196.94-2.704 1.498-4.34 1.498-.283 0-.562-.013-.835-.046 1.55.99 3.385 1.568 5.36 1.568 6.43 0 9.944-5.323 9.944-9.94 0-.153-.003-.306-.01-.454.684-.492 1.278-1.108 1.745-1.81"})]})})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"button--svg",href:"https://www.instagram.com/",children:Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",viewBox:"0 0 46 46",role:"img","aria-labelledby":"instagram-icon",children:[Object(c.jsx)("title",{id:"instagram-icon",children:"Instagram"}),Object(c.jsx)("path",{className:"button--svg__border",fill:"#E5E5E5",d:"M23 3c11.028 0 20 8.972 20 20s-8.972 20-20 20S3 34.028 3 23 11.972 3 23 3m0-2C10.85 1 1 10.85 1 23s9.85 22 22 22 22-9.85 22-22S35.15 1 23 1z"}),Object(c.jsx)("path",{fill:"#5E6C89",d:"M29.76 29.03v-7.373h-1.537c.152.48.23.975.23 1.49 0 .958-.243 1.838-.73 2.647-.485.807-1.146 1.447-1.98 1.918-.834.47-1.744.705-2.73.705-1.495 0-2.773-.514-3.835-1.543-1.062-1.027-1.593-2.27-1.593-3.726 0-.517.076-1.013.228-1.49H16.21v7.373c0 .2.065.37.2.5.13.14.296.2.494.2H29.07c.188 0 .352-.06.488-.2s.202-.3.202-.49zm-3.233-6.064c0-.94-.343-1.743-1.03-2.406-.686-.664-1.515-.996-2.486-.996-.96 0-1.78.332-2.47.996-.68.663-1.03 1.466-1.03 2.406 0 .942.35 1.743 1.03 2.407s1.51.996 2.48.996c.975 0 1.8-.34 2.49-1s1.03-1.47 1.03-2.41zm3.233-4.097v-1.88c0-.22-.076-.4-.23-.56-.15-.158-.336-.235-.556-.235h-1.98c-.22 0-.406.08-.558.233-.15.155-.228.34-.228.552v1.876c0 .22.076.404.228.556s.337.23.558.23h1.98c.22 0 .406-.078.557-.23.16-.15.23-.338.23-.558zm1.98-2.37v12.99c0 .61-.22 1.14-.66 1.58-.44.44-.967.66-1.582.66H16.502c-.614 0-1.142-.22-1.582-.66-.44-.44-.66-.97-.66-1.586V16.5c0-.614.22-1.142.66-1.582.44-.44.967-.66 1.582-.66h12.996c.615 0 1.14.22 1.582.66.44.44.66.967.66 1.58z"})]})})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{className:"button--svg",href:"https://www.youtube.com/",children:Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",viewBox:"0 0 46 46",role:"img","aria-labelledby":"youtube-icon",children:[Object(c.jsx)("title",{id:"youtube-icon",children:"YouTube"}),Object(c.jsx)("path",{className:"button--svg__border",fill:"#E5E5E5",d:"M23 3c11.028 0 20 8.972 20 20s-8.972 20-20 20S3 34.028 3 23 11.972 3 23 3m0-2C10.85 1 1 10.85 1 23s9.85 22 22 22 22-9.85 22-22S35.15 1 23 1z"}),Object(c.jsx)("path",{fill:"#E52E28",d:"M27.68 23c0-.3-.12-.52-.364-.657l-6.24-3.9c-.253-.163-.517-.172-.793-.025-.27.147-.402.374-.402.683v7.803c0 .31.136.537.404.682.13.067.256.1.378.1.164 0 .3-.042.416-.122l6.24-3.9c.243-.14.365-.36.365-.66zm6.242 0c0 .78-.004 1.39-.012 1.83-.008.438-.043.993-.104 1.662-.06.672-.15 1.27-.274 1.8-.13.592-.41 1.092-.84 1.5-.43.405-.935.64-1.512.705-1.804.203-4.53.303-8.18.303-3.65 0-6.375-.1-8.18-.304-.576-.064-1.082-.3-1.517-.706-.435-.407-.717-.907-.847-1.5-.114-.527-.2-1.127-.263-1.8-.06-.668-.095-1.223-.103-1.662-.008-.438-.012-1.05-.012-1.828 0-.78.004-1.39.012-1.828.008-.44.042-.995.103-1.665.062-.67.152-1.27.274-1.797.13-.593.41-1.093.84-1.5.432-.407.936-.642 1.513-.707 1.804-.203 4.53-.305 8.18-.305 3.648 0 6.375.102 8.18.305.576.065 1.08.3 1.516.707.436.406.718.906.85 1.5.112.528.2 1.127.26 1.797.062.67.097 1.226.104 1.665.008.438.012 1.048.012 1.83z"})]})})})]}),Object(c.jsxs)("div",{className:"footer-copyright text-center py-3",children:["\xa9 2020 Copyright:",Object(c.jsx)("a",{href:"/",children:" StoreApp.com"})]})]})},le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleDelete=function(t){e.props.DeleteItemFromCart(t),e.props.fetchCart(e.props.user.id)},e.AddQuantityItem=function(t){if(e.props.user){var a=e.props.user.id;console.log(a);var c={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}};f.a.post("http://127.0.0.1:8000/products/add-to-cart/",{slug:t,user_id:a},c).then((function(t){e.props.fetchCart(e.props.user.id),console.log("done",t.data)})).catch((function(e){}))}},e.MinusQuantityItem=function(t){if(e.props.user){var a=e.props.user.id;console.log(a);var c={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}};f.a.post("http://127.0.0.1:8000/products/update_quantity/",{slug:t,user_id:a},c).then((function(t){e.props.fetchCart(e.props.user.id),console.log("done",t.data)})).catch((function(e){}))}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchCart(this.props.user.id)}},{key:"render",value:function(){var e=this,t=this.props.cart;return this.props.loading?Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[Object(c.jsx)("i",{className:"fa fa-circle-o-notch fa-spin fa-3x fa-fw"}),Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})]})}):Object(c.jsx)("div",{children:t&&0!==t.order_items.length?Object(c.jsx)("div",{className:"card mt-1 container ",style:{width:"100%"},children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table product-table ",children:[Object(c.jsx)("thead",{className:"mdb-color lighten-5",children:Object(c.jsxs)("tr",{className:"bg-light",children:[Object(c.jsx)("th",{}),Object(c.jsx)("th",{className:"font-weight-bold",children:Object(c.jsx)("strong",{children:"Product"})}),Object(c.jsx)("th",{}),Object(c.jsx)("th",{className:"font-weight-bold",children:Object(c.jsx)("strong",{children:"Price"})}),Object(c.jsx)("th",{className:"font-weight-bold",children:Object(c.jsx)("strong",{children:"Quantity"})}),Object(c.jsx)("th",{className:"font-weight-bold",children:Object(c.jsx)("strong",{children:"Total Item"})}),Object(c.jsx)("th",{})]})}),Object(c.jsxs)("tbody",{children:[t?t.order_items.map((function(t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:Object(c.jsx)("img",{src:t.item.photo_main,alt:"",className:"img-fluid z-depth-0"})}),Object(c.jsxs)("td",{children:[Object(c.jsx)("h5",{className:"mt-3",children:Object(c.jsx)("strong",{children:t.item.title})}),Object(c.jsx)("p",{className:"text-muted",children:t.item.category})]}),Object(c.jsx)("td",{}),Object(c.jsx)("td",{className:"pt-5",children:t.item.price}),Object(c.jsxs)("td",{className:"pt-5",children:[Object(c.jsx)("i",{className:"fa fa-minus mr-3","aria-hidden":"true",onClick:function(a){return e.MinusQuantityItem(t.item.slug)}}),Object(c.jsx)("span",{children:t.quantity}),Object(c.jsx)("i",{className:"fa fa-plus ml-3","aria-hidden":"true",onClick:function(a){return e.AddQuantityItem(t.item.slug)}})]}),Object(c.jsx)("td",{className:"font-weight-bold pt-5 ",children:Object(c.jsx)("strong",{children:t.final_price})}),Object(c.jsx)("td",{className:"pt-5",children:Object(c.jsxs)("span",{className:"btn btn-danger",onClick:function(){return e.handleDelete(t.id)},children:[Object(c.jsx)("i",{className:"fa fa-trash-o fa-lg"})," Delete"]})})]},t.id)})):null,Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{colSpan:"3"}),Object(c.jsx)("td",{children:Object(c.jsx)("h4",{className:"mt-2",children:Object(c.jsx)("strong",{children:"Total"})})}),Object(c.jsx)("td",{className:"text-right",children:Object(c.jsx)("h4",{className:"mt-2",children:Object(c.jsx)("strong",{children:t?t.total:null})})}),Object(c.jsx)("td",{colSpan:"3",className:"text-right",children:Object(c.jsx)(j.b,{to:"/checkout",children:Object(c.jsxs)("button",{type:"button",className:"btn btn-warning btn-rounded",children:["Complete purchase",Object(c.jsx)("i",{className:"fa fa-angle-right ml-2 fa-lg","aria-hidden":"true"})]})})})]})]})]})})})}):Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{className:"w-25 rounded mx-auto d-block",src:"https://webmobtuts.com/wp-content/uploads/2018/05/Creating-a-Shopping-Cart-With-Laravel.png",alt:""}),Object(c.jsx)("h2",{className:"d-flex justify-content-center mt-2",children:"Your shoping cart is Empty"})]})})}}]),a}(n.Component),de=Object(O.b)((function(e){return{user:e.account.user,cart:e.product.cart,loading:e.product.loading}}),{fetchCart:J,DeleteItemFromCart:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:A}),!localStorage.getItem("access")){t.next=14;break}return c={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},t.prev=3,t.next=6,f.a.delete("http://127.0.0.1:8000/products/order-items/".concat(e,"/delete/"),c);case 6:a({type:I,payload:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),a({type:T});case 12:t.next=15;break;case 14:a({type:T});case 15:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}()}})(le),ue=a(93),je=a(40),pe=a(71);var be=Object(O.b)((function(e){return{cart:e.product.cart,user:e.account.user}}),{fetchCart:J})((function(e){return Object(n.useEffect)((function(){e.user&&e.fetchCart(e.user.id)}),[e.user]),Object(c.jsxs)("div",{className:"mt-5",style:{width:"60%"},children:[Object(c.jsx)(pe.g,{scrollY:!0,maxHeight:"400px",children:Object(c.jsx)(pe.h,{style:{height:"800px"},children:e.cart&&e.cart.order_items.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:Object(c.jsx)("img",{src:e.item.photo_main,alt:"",style:{height:"100px",width:"150px"},className:"img-fluid z-depth-0"})}),Object(c.jsxs)("td",{children:[Object(c.jsx)("h5",{className:"mt-3",children:Object(c.jsxs)("strong",{children:[e.quantity," x ",e.item.title]})}),Object(c.jsx)("p",{className:"text-muted",children:e.item.category})]}),Object(c.jsx)("td",{className:"d-flex justify-content-center pt-4",children:e.final_price})]},e.id)}))})}),Object(c.jsx)("div",{style:{display:"flex",flexDirection:"column",padding:"10px",borderBottom:"0.1px solid gray"},children:Object(c.jsxs)("tr",{className:"mr-4",style:{alignSelf:"flex-end"},children:[Object(c.jsx)("td",{children:"Total : "}),Object(c.jsx)("td",{}),Object(c.jsx)("td",{children:e.cart?Object(c.jsx)("h5",{children:e.cart.total}):null})]})})]})})),he=a(182),me=a(101),Oe=Object(O.b)((function(e){return{user:e.account.user}}),{fetchCart:J})((function(e){var t=e.success,a=e.user,n=e.fetchCart,r=Object(je.useStripe)(),o=Object(je.useElements)(),i=s.a.useState([]),l=Object(H.a)(i,2),d=l[0],u=l[1],j=s.a.useState({apartment_address:"",country:"",street_address:"",zip:""}),p=Object(H.a)(j,2),b=p[0],O=p[1];s.a.useEffect((function(){f.a.get("http://127.0.0.1:8000/products/country_list/").then((function(e){return u(function(e){return Object.keys(e).map((function(t){return{label:e[t],value:t}}))}(e.data))}))}),[]);var x=function(){var e=Object(m.a)(h.a.mark((function e(c){var s,i,l,d,u,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,r.createPaymentMethod({type:"card",card:o.getElement(je.CardElement)});case 3:if(s=e.sent,i=s.error,l=s.paymentMethod,i){e.next=21;break}return d=a.id,e.prev=8,u={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.next=12,f.a.post("http://127.0.0.1:8000/products/checkout/",{payment_method_id:l.id,user_id:d,zip:b.zip,street_address:b.street_address,apartement_address:b.apartment_address,country:b.country},u);case 12:j=e.sent,j.data,n(d),t(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){O(Object(ee.a)(Object(ee.a)({},b),{},Object(Z.a)({},e.target.name,e.target.value)))};return Object(c.jsxs)("div",{className:"w-50 m-5",children:[Object(c.jsxs)(he.a,{children:[Object(c.jsx)("h6",{children:"You need to add addresses before you can complete your purchase"}),Object(c.jsx)(he.a.Group,{controlId:"formBasicEmail",children:Object(c.jsx)(he.a.Control,{type:"text",placeholder:"Street address",name:"street_address",value:b.street_address,onChange:function(e){return g(e)}})}),Object(c.jsx)(he.a.Group,{controlId:"formBasicEmail",children:Object(c.jsx)(he.a.Control,{type:"text",placeholder:"Apartment address",name:"apartment_address",value:b.apartment_address,onChange:function(e){return g(e)}})}),Object(c.jsx)(he.a.Group,{controlId:"formBasicEmail",children:Object(c.jsx)(me.a,{options:d,placeholder:"Country",name:"country",label:b.country,onChange:function(e,t){var a=t.name;t.value;O(Object(ee.a)(Object(ee.a)({},b),{},Object(Z.a)({},a,e.label)))}})}),Object(c.jsx)(he.a.Group,{controlId:"formBasicEmail",children:Object(c.jsx)(he.a.Control,{type:"text",placeholder:"Postal code",name:"zip",value:b.zip,onChange:function(e){return g(e)}})})]}),Object(c.jsxs)("form",{className:"mt-3 mr-5",onSubmit:x,style:{width:"100%"},children:[Object(c.jsx)("h4",{className:"mb-3",children:"Would you complete your purchase ?"}),Object(c.jsx)(je.CardElement,{}),Object(c.jsx)(Y.a,{className:"mt-3",type:"submit",disabled:!r,style:{width:"100%"},children:"Pay"})]})]})})),xe=Object(ue.a)("pk_test_51HpWUdAHdk3LQCR4NdO1v4XGdIci4KVffOBjlY3p84Y65CDxa2wz3NgaGAxoLDAFDbh8UoAy85cqHWNd5I5MyypH00fcFtkQqs"),fe=function(){var e=s.a.useState("ready"),t=Object(H.a)(e,2),a=t[0],n=t[1];return localStorage.getItem("access")?"success"===a?Object(c.jsxs)("div",{className:"mt-5",children:[Object(c.jsx)("i",{class:"fa fa-check-circle fa-5x d-flex justify-content-center",style:{color:"green"},"aria-hidden":"true"}),Object(c.jsx)("h1",{className:"d-flex justify-content-center ",children:"Congrats on your payment!"})]}):Object(c.jsx)(je.Elements,{stripe:xe,children:Object(c.jsxs)("div",{className:"container",style:{display:"flex"},children:[Object(c.jsx)(Oe,{success:function(){n("success")}}),Object(c.jsx)(be,{})]})}):Object(c.jsx)(p.a,{to:"/"})},ge=(a(170),a(181)),ve=a(179),ye=a(183),we=a(180),Ne=a(97),_e=a(184);function Se(e){var t=Object(n.useState)(!1),a=Object(H.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)(""),i=Object(H.a)(o,2),l=i[0],d=i[1],u=function(){return r(!1)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Y.a,{variant:"danger",onClick:function(){return r(!0)},children:"Delete account"}),Object(c.jsxs)(ge.a,{show:s,onHide:u,children:[Object(c.jsx)(ge.a.Header,{closeButton:!0,children:Object(c.jsx)(ge.a.Title,{children:"Delete Account"})}),Object(c.jsxs)(ge.a.Body,{children:[Object(c.jsx)("label",{children:" Current Password"}),Object(c.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Current Password",onChange:function(e){d(e.target.value)},value:l})]}),Object(c.jsxs)(ge.a.Footer,{children:[Object(c.jsx)(Y.a,{variant:"secondary",onClick:u,children:"Cancel"}),Object(c.jsx)(Y.a,{variant:"primary",onClick:function(){e.deleteUser(l),u()},children:"confirm"})]})]})]})}var Ce=Object(O.b)((function(e){return{user:e.account.user,loading:e.account.loading,error:e.error,payments:e.product.payments}}),{deleteUser:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!localStorage.getItem("access")){t.next=11;break}return t.prev=1,t.next=4,f.a.delete("http://127.0.0.1:8000/auth/users/me/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))},data:{current_password:e}});case 4:t.sent,a({type:P}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUser:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:U}),!localStorage.getItem("access")){t.next=13;break}return c={url:"http://127.0.0.1:8000/auth/users/me/",method:"PUT",data:{name:e},headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))}},t.prev=3,t.next=6,f()(c);case 6:t.sent,a({load_user:F,type:D,payload:e}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a({type:R});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},set_password:function(e){var t=e.current_password,a=e.new_password,c=e.re_new_password;return function(){var e=Object(m.a)(h.a.mark((function e(n){var s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:U}),s={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},r=JSON.stringify({current_password:t,new_password:a,re_new_password:c}),e.prev=3,e.next=6,f.a.post("http://127.0.0.1:8000/auth/users/set_password/",r,s);case 6:e.sent,n({type:L}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),n({type:R});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},fetchPayment:function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.prev=1,e.next=4,f.a.get("http://127.0.0.1:8000/products/payment_history/",a);case 4:c=e.sent,t({type:z,payload:c.data.results}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){Object(n.useEffect)((function(){e.fetchPayment()}),[]);var t=Object(n.useState)({current_password:"",new_password:"",re_new_password:""}),a=Object(H.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)({name:e.user?e.user.name:"",email:e.user?e.user.email:""}),i=Object(H.a)(o,2),l=i[0],d=i[1],u=function(e){d(Object(ee.a)(Object(ee.a)({},l),{},Object(Z.a)({},e.target.name,e.target.value))),r(Object(ee.a)(Object(ee.a)({},s),{},Object(Z.a)({},e.target.name,e.target.value)))};return e.user?Object(c.jsx)(ve.a,{children:Object(c.jsx)(ye.a,{defaultActiveKey:"0",children:Object(c.jsxs)(we.a,{children:[Object(c.jsxs)(Ne.a,{xs:4,className:"show mt-4",children:[Object(c.jsx)(ye.a.Toggle,{className:"show",as:_e.a.Header,eventKey:"0",children:"Account"}),Object(c.jsx)(ye.a.Toggle,{className:"show",as:_e.a.Header,eventKey:"1",children:"Payment History"})]}),Object(c.jsxs)(Ne.a,{xs:8,children:[Object(c.jsx)(ye.a.Collapse,{eventKey:"0",children:Object(c.jsx)(_e.a.Body,{style:{height:"100%"},children:Object(c.jsxs)("div",{className:"container-profile border-left pl-5",children:[Object(c.jsx)("h3",{children:"My account"}),Object(c.jsxs)("div",{className:"container-edit",children:[Object(c.jsx)("label",{children:"Your Name"}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"Entre Name",name:"name",value:l.name,onChange:u}),Object(c.jsx)(Y.a,{className:"btn-update",onClick:function(){var t=l.name;e.updateUser(t)},children:e.loading?Object(c.jsx)("i",{className:"fa fa-circle-o-notch fa-spin"}):"Update"})]}),Object(c.jsx)("h5",{children:"Change your password"}),Object(c.jsxs)("div",{className:"container-edit",children:[Object(c.jsx)("label",{children:" Current Password"}),Object(c.jsx)("input",{type:"password",name:"current_password",className:"form-control",placeholder:"Current Password",value:s.current_password,onChange:u}),Object(c.jsx)("label",{children:"New Password"}),Object(c.jsx)("input",{type:"password",name:"new_password",className:"form-control",placeholder:"New Password",value:s.new_password,onChange:u}),Object(c.jsx)("label",{children:"Repeat new Password"}),Object(c.jsx)("input",{type:"password",name:"re_new_password",className:"form-control",placeholder:"confirm new Password",value:s.re_new_password,onChange:u}),Object(c.jsx)(Y.a,{className:" btn-update",onClick:function(){e.set_password(s)},children:"Confirm"})]}),Object(c.jsxs)("div",{className:"remove-account mb-4",children:[Object(c.jsx)("h6",{children:"Remove Account"}),Object(c.jsx)("p",{children:"You have the option to delete your account"}),Object(c.jsx)("p",{children:"NB: you will can't login with this account again "}),Object(c.jsx)(Se,{deleteUser:e.deleteUser})]})]})})}),Object(c.jsx)(ye.a.Collapse,{eventKey:"1",children:Object(c.jsx)(_e.a.Body,{children:Object(c.jsxs)("table",{className:"table border border-left pl-4",children:[Object(c.jsx)("thead",{className:"bg-light",children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",className:"border",children:"ID"}),Object(c.jsx)("th",{scope:"col",className:"border",children:"Amount"}),Object(c.jsx)("th",{scope:"col",className:"border",children:"Date"})]})}),Object(c.jsx)("tbody",{children:e.payments&&e.payments.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"pl-2 border",children:e.id}),Object(c.jsxs)("td",{className:"pl-2 border",children:["$ ",e.amount]}),Object(c.jsx)("td",{className:"pl-2 border",children:new Date(e.timestamp).toUTCString()})]},e.id)}))})]})})})]})]})})}):Object(c.jsx)(p.a,{to:"/login"})})),ke=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(c.jsxs)(j.a,{children:[Object(c.jsx)(B,{}),Object(c.jsxs)(p.d,{children:[Object(c.jsx)(p.b,{exact:!0,path:"/",component:$}),Object(c.jsx)(p.b,{exact:!0,path:"/products/:id",component:X}),Object(c.jsx)(p.b,{exact:!0,path:"/login",component:ae}),Object(c.jsx)(p.b,{exact:!0,path:"/register",component:ne}),Object(c.jsx)(p.b,{exact:!0,path:"/reset_password",component:re}),Object(c.jsx)(p.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:oe}),Object(c.jsx)(p.b,{exact:!0,path:"/activate/:uid/:token",component:se}),Object(c.jsx)(p.b,{exact:!0,path:"/order_summary",component:de}),Object(c.jsx)(p.b,{exact:!0,path:"/checkout",component:fe}),Object(c.jsx)(p.b,{exact:!0,path:"/profile",component:Ce})]}),Object(c.jsx)(ie,{})]})}}]),a}(n.Component),Ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,185)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))},Ee=a(31),Te=a(99),Ie=a(100),Pe={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:JSON.parse(localStorage.getItem("user")),loading:!1},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case C:return Object(ee.a)(Object(ee.a)({},e),{},{isAuthenticated:!0});case N:return localStorage.setItem("access",c.access),Object(ee.a)(Object(ee.a)({},e),{},{isAuthenticated:!0,access:c.access,refresh:c.refresh});case y:return Object(ee.a)(Object(ee.a)({},e),{},{isAuthenticated:!1});case _:return localStorage.setItem("user",JSON.stringify(c)),Object(ee.a)(Object(ee.a)({},e),{},{user:c});case U:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case D:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!1,user:Object(ee.a)(Object(ee.a)({},e.user),{},{name:c})});case R:case L:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!1});case P:case w:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("user"),Object(ee.a)(Object(ee.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null});default:return e}},Re={msg:{},status:null,id:null};var Ue={loading:!1,cart:null,payments:[]},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case A:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case E:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!1,cart:c});case I:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!1,cart:e.cart.filter((function(e){return e.order_items.id!==c}))});case T:return Object(ee.a)(Object(ee.a)({},e),{},{loading:!1,cart:null});case z:return Object(ee.a)(Object(ee.a)({},e),{},{payments:c});default:return e}},ze=Object(Ee.combineReducers)({account:De,errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case v:return{msg:{},status:null,id:null};default:return e}},product:Le}),Me=[Ie.a],Fe=Object(Ee.createStore)(ze,{},Object(Te.composeWithDevTools)(Ee.applyMiddleware.apply(void 0,Me)));o.a.render(Object(c.jsx)(O.a,{store:Fe,children:Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(ke,{})})}),document.getElementById("root")),Ae()},61:function(e,t,a){},80:function(e,t,a){}},[[171,1,2]]]);
//# sourceMappingURL=main.3bfe0d2f.chunk.js.map